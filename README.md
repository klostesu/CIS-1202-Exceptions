Function to calculate character offsets, throuwing exceptions in error conditions; included vector for test data
